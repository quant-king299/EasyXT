# 101因子分析平台使用指南

## 简介

101因子分析平台是一个可视化的工作流系统，允许您通过拖拽式界面构建量化策略，进行因子计算、分析和回测。本指南将详细介绍如何使用该平台。

## 快速启动

### 启动平台
```bash
cd c:\Users\Administrator\Desktop\miniqmt扩展\101因子\101因子分析平台
streamlit run src/workflow/ui_enhanced.py --server.port=8510 --server.address=127.0.0.1
```

启动后，在浏览器中访问：http://127.0.0.1:8510

## 界面介绍

### 1. 侧边栏功能区
- **工作流构建器**：主标题，显示当前功能
- **添加节点**：选择不同类型的分析节点添加到工作流中
- **工作流操作**：执行、保存、加载、清空等操作

### 2. 画布区域
- 显示已添加的节点，可以查看节点的配置和结果

## 基本使用流程

### 第一步：添加数据加载节点
1. 在侧边栏的"选择节点类型"下拉框中选择"**数据加载**"
2. 配置参数：
   - **股票代码**：输入要分析的股票代码，如"000001.SZ,000002.SZ"
   - **开始日期**：选择数据开始时间，如"2023-01-01"
   - **结束日期**：选择数据结束时间，如"2023-12-31"
   - **字段**：选择需要的字段，如"close"
3. 点击"**添加 数据加载**"按钮
4. **重要**：添加后，您应该能在画布区域看到一个"数据加载"节点

### 第二步：添加因子计算节点
1. 在"选择节点类型"中选择"**因子计算**"
2. 配置参数：
   - **因子名称**：选择要计算的因子，如"alpha001"
3. 点击"**添加 因子计算**"按钮
4. **重要**：添加后，您应该能在画布区域看到一个"因子计算"节点

### 第三步：添加IC分析节点
1. 在"选择节点类型"中选择"**IC分析**"
2. 配置参数：
   - **期数**：设置分析期数，如"1"
3. 点击"**添加 IC分析**"按钮
4. **重要**：添加后，您应该能在画布区域看到一个"IC分析"节点

### 第四步：添加回测引擎节点
1. 在"选择节点类型"中选择"**回测引擎**"
2. 配置参数：
   - **做多分位数**：设置做多比例，如"0.2"
   - **做空分位数**：设置做空比例，如"0.2"
   - **交易成本**：设置交易成本，如"0.001"
3. 点击"**添加 回测引擎**"按钮
4. **重要**：添加后，您应该能在画布区域看到一个"回测引擎"节点

## 执行工作流

1. **确认节点已添加**：在点击执行前，请确保画布区域显示了您添加的所有节点
2. 在侧边栏点击"**执行**"按钮
3. 系统会依次执行所有节点
4. 执行结果会显示在画布区域下方的"执行结果"部分

## 常见问题解决

### Q: 添加节点后画布仍显示"暂无节点"？
A: 
1. 确认您点击了"添加 [节点名称]"按钮（而不是仅仅选择了节点类型）
2. 刷新页面（Ctrl+F5）查看节点是否出现
3. 检查浏览器控制台是否有错误信息

### Q: 点击执行后仍显示"暂无执行结果"？
A:
1. 确认画布区域确实显示了至少一个节点
2. 检查是否有节点参数配置错误
3. 等待执行完成（可能需要几秒钟到几分钟，取决于数据量）
4. 查看浏览器控制台或终端是否有错误信息

### Q: 执行过程中出错？
A:
1. 检查EasyXT服务是否正常启动
2. 确认股票代码格式正确（如：000001.SZ）
3. 确认日期范围在有效期内
4. 检查网络连接是否正常

## 节点类型说明

### 1. 数据加载 (📊)
- **功能**：从数据源获取股票历史数据
- **参数**：
  - 股票代码：要获取的股票列表
  - 日期范围：数据时间范围
  - 字段：需要获取的数据字段

### 2. 因子计算 (📈)
- **功能**：计算各种量化因子
- **参数**：
  - 因子名称：选择要计算的因子类型

### 3. IC分析 (🔍)
- **功能**：分析因子的信息系数
- **参数**：
  - 期数：分析的期数

### 4. 回测引擎 (🧪)
- **功能**：对策略进行历史回测
- **参数**：
  - 做多分位数：做多策略的股票选择比例
  - 做空分位数：做空策略的股票选择比例
  - 交易成本：模拟交易成本

### 5. 绩效分析 (🏆)
- **功能**：分析策略的绩效指标
- **参数**：无特殊参数

### 6. 数据处理 (⚙️)
- **功能**：对数据进行预处理
- **参数**：
  - 操作：选择处理方式（标准化、排序、中性化）

### 7. 信号生成 (🔔)
- **功能**：生成交易信号
- **参数**：
  - 方法：选择生成方法
  - 阈值：设置信号触发阈值

### 8. 组合优化 (💼)
- **功能**：优化投资组合权重
- **参数**：
  - 权重方法：选择权重分配方法
  - 最大权重：设置单只股票最大权重

### 9. 风险管理 (🛡️)
- **功能**：控制投资风险
- **参数**：
  - 最大头寸：设置最大头寸比例

## 实际操作示例

### 示例：完整的因子分析流程

1. **添加数据加载节点**
   - 股票代码：000001.SZ,000002.SZ,000004.SZ,000005.SZ,000006.SZ
   - 开始日期：2023-01-01
   - 结束日期：2023-06-30
   - 字段：close

2. **添加因子计算节点**
   - 因子名称：alpha001

3. **添加IC分析节点**
   - 期数：1

4. **添加回测引擎节点**
   - 做多分位数：0.2
   - 做空分位数：0.2
   - 交易成本：0.001

5. **确认节点已添加到画布**
   - 检查画布区域是否显示了以上4个节点

6. **点击执行按钮**
   - 等待执行完成
   - 查看各节点的执行结果

## 结果解读

### 数据加载结果
- 显示获取的数据形状（行数×列数）
- 展示数据的前几行

### 因子计算结果
- 显示计算出的因子值
- 因子数据的统计信息

### IC分析结果
- 显示因子与未来收益的相关性
- IC均值、IC标准差等统计指标

### 回测结果
- 策略收益曲线
- 年化收益率、夏普比率、最大回撤等指标

## 常见问题

### Q: 添加节点后没有显示？
A: 请确保正确点击了"添加"按钮，节点会显示在画布区域。

### Q: 执行后没有结果？
A: 请检查是否正确连接了节点，以及参数设置是否合理。

### Q: 数据加载失败？
A: 请检查股票代码格式是否正确，日期范围是否有效。

## 保存和加载

### 保存工作流
1. 在侧边栏输入文件名（如"my_workflow.json"）
2. 点击"保存"按钮

### 加载工作流
1. 在侧边栏输入之前保存的文件名
2. 点击"加载"按钮

## 清空工作流
- 点击侧边栏的"清空"按钮可以清空当前工作流

---

更多详细内容可关注微信公众号 王者quant 微信号 www_ptqmt_com