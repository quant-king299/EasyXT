# 🚀 EasyXT基础入门教程

> **项目地址**: https://github.com/quant-king299/EasyXT
> 
> 本教程基于 `学习实例/01_基础入门.py` 文件，详细介绍EasyXT的基础功能和使用方法。

## 📋 目录

1. [项目介绍](#项目介绍)
2. [环境准备](#环境准备)
3. [第1课：基础设置和初始化](#第1课基础设置和初始化)
4. [第2课：获取股票数据](#第2课获取股票数据)
5. [第3课：获取不同周期的数据](#第3课获取不同周期的数据)
6. [第4课：按日期范围获取数据](#第4课按日期范围获取数据)
7. [第5课：获取实时价格](#第5课获取实时价格)
8. [第6课：获取股票列表](#第6课获取股票列表)
9. [第7课：获取交易日历](#第7课获取交易日历)
10. [运行学习实例](#运行学习实例)
11. [常见问题](#常见问题)

---

## 🎯 项目介绍

### EasyXT是什么？
EasyXT是一个基于xtquant的Python API封装库，提供了：

- **简化的API接口**：将复杂的xtquant调用封装成简单易用的方法
- **自动配置管理**：自动检测QMT安装路径，简化配置过程
- **统一的错误处理**：提供友好的错误提示和异常处理
- **丰富的工具函数**：包含股票代码处理、时间处理等实用工具

### 核心模块
```
easy_xt/
├── api.py              # 主API入口
├── data_api.py         # 数据API封装
├── trade_api.py        # 交易API封装
├── extended_api.py     # 扩展API功能
├── advanced_trade_api.py # 高级交易API
├── config.py           # 配置管理
├── utils.py            # 工具函数
├── types.py            # 类型定义
└── validators.py       # 数据验证
```

---

## 🛠️ 环境准备

### 系统要求
- Windows 10/11 操作系统
- Python 3.7+ 环境
- 迅投QMT客户端（已安装并登录）

### 安装依赖
```bash
pip install pandas
pip install numpy
```

### 项目结构
```
miniqmt扩展/
├── easy_xt/           # EasyXT核心库
├── xtquant/           # xtquant原始库
├── 学习实例/          # 学习示例代码
│   └── 01_基础入门.py # 本教程对应的实例代码
├── config/            # 配置文件
└── logs/             # 日志文件
```

---

## 📚 第1课：基础设置和初始化

### 学习目标
掌握EasyXT的基本初始化和简单数据获取

### 代码示例
```python
import easy_xt

# 1. 创建API实例
api = easy_xt.get_api()
print("✓ API实例创建成功")

# 2. 初始化数据服务
success = api.init_data()
if success:
    print("✓ 数据服务初始化成功")
else:
    print("⚠️ 数据服务初始化失败，这是正常的")
    print("💡 原因：需要启动迅投客户端并登录")
    print("🔄 继续使用模拟模式进行学习")
```

### 运行效果预览
```
============================================================
第1课：EasyXT基础设置
============================================================
1. 创建API实例
✓ API实例创建成功

2. 初始化数据服务
✓ 数据服务初始化成功

按回车键继续下一课...
```

### 关键知识点
- 使用 `easy_xt.get_api()` 获取API实例
- 使用 `api.init_data()` 初始化数据服务
- 如果QMT客户端未启动，会自动切换到模拟模式

---

## 📊 第2课：获取股票数据

### 学习目标
学习如何获取单只股票和多只股票的历史数据

### 单只股票数据
```python
# 获取平安银行(000001.SZ)最近10天数据
data = api.get_price('000001.SZ', count=10)
print("✓ 数据获取成功")
print(f"数据形状: {data.shape}")
print("最新5条数据:")
print(data.tail().to_string())
```

### 多只股票数据
```python
# 获取多只股票数据
codes = ['000001.SZ', '000002.SZ', '600000.SH']  # 平安银行、万科A、浦发银行
data = api.get_price(codes, count=5)

if not data.empty:
    print("✓ 多股票数据获取成功")
    print(f"数据形状: {data.shape}")
    print("数据预览:")
    print(data.head(10).to_string())
```

### 运行效果预览
```
============================================================
第2课：获取股票数据
============================================================
1. 获取平安银行(000001.SZ)最近10天数据
✓ 数据获取成功
数据形状: (10, 7)
最新5条数据:
        time    code   open   high    low  close    volume
2024-01-10  000001.SZ  12.45  12.67  12.38  12.58  45678900
2024-01-11  000001.SZ  12.60  12.78  12.52  12.71  38901234
...

2. 获取多只股票数据
✓ 多股票数据获取成功
数据形状: (15, 7)
数据预览:
        time    code   open   high    low  close    volume
2024-01-10  000001.SZ  12.45  12.67  12.38  12.58  45678900
2024-01-10  000002.SZ   8.42   8.56   8.38   8.51  32145678
2024-01-10  600000.SH  10.23  10.45  10.18  10.38  28934567
...

按回车键继续下一课...
```

### 关键知识点
- 使用 `api.get_price()` 获取历史价格数据
- 支持单只股票和多只股票同时获取
- 返回的是pandas DataFrame格式
- 包含开高低收成交量等完整信息

---

## ⏰ 第3课：获取不同周期的数据

### 学习目标
了解EasyXT支持的数据周期和使用注意事项

### 稳定支持的周期
```python
# 测试稳定支持的周期
stable_periods = ['1d', '1m', '5m']  # 稳定支持的周期

for period in stable_periods:
    print(f"\n获取 {code} 的 {period} 数据:")
    data = api.get_price(code, period=period, count=5)
    if not data.empty:
        print(f"✓ {period} 数据获取成功，共 {len(data)} 条")
        print(f"最新价格: {data['close'].iloc[-1]:.2f}")
```

### 需要注意的周期
```python
# 这些周期可能导致程序挂起，建议避免使用
problematic_periods = ['15m', '30m', '1h']
```

### 运行效果预览
```
============================================================
第3课：获取不同周期的数据
============================================================
测试稳定支持的数据周期:

获取 000001.SZ 的 1d 数据:
✓ 1d 数据获取成功，共 5 条
时间范围: 2024-01-08 到 2024-01-12
最新价格: 12.58

获取 000001.SZ 的 1m 数据:
✓ 1m 数据获取成功，共 5 条
时间范围: 2024-01-12 14:55:00 到 2024-01-12 14:59:00
最新价格: 12.59

获取 000001.SZ 的 5m 数据:
✓ 5m 数据获取成功，共 5 条
时间范围: 2024-01-12 14:35:00 到 2024-01-12 14:55:00
最新价格: 12.60

⚠️  注意：以下周期可能导致程序挂起，已跳过测试:
   - 15m: 可能导致程序无响应
   - 30m: 可能导致程序无响应
   - 1h: 可能导致程序无响应

💡 建议：
   - 日线数据使用 '1d'
   - 分钟数据使用 '1m' 或 '5m'
   - 避免使用 '15m', '30m', '1h' 周期

按回车键继续下一课...
```

### 关键知识点
- **推荐使用**：'1d'（日线）、'1m'（1分钟）、'5m'（5分钟）
- **避免使用**：'15m'、'30m'、'1h'（可能导致程序无响应）
- 不同周期的数据量和精度不同

---

## 📅 第4课：按日期范围获取数据

### 学习目标
学习如何按指定日期范围获取历史数据

### 按日期范围获取
```python
from datetime import datetime, timedelta

# 获取最近一周的数据
end_date = datetime.now()
start_date = end_date - timedelta(days=7)

start_str = start_date.strftime('%Y-%m-%d')
end_str = end_date.strftime('%Y-%m-%d')

data = api.get_price(
    codes=code,
    start=start_str,
    end=end_str,
    period='1d'
)

if not data.empty:
    print("✓ 日期范围数据获取成功")
    print(f"数据条数: {len(data)}")
    print("价格统计:")
    print(f"  最高价: {data['high'].max():.2f}")
    print(f"  最低价: {data['low'].min():.2f}")
    print(f"  平均价: {data['close'].mean():.2f}")
```

### 支持的日期格式
```python
# 支持多种日期格式
date_formats = [
    ('2024-01-01', '2024-01-07'),  # 标准格式
    ('20240101', '20240107'),      # 紧凑格式
    ('2024/01/01', '2024/01/07')   # 斜杠格式
]
```

### 推荐使用count参数
```python
# 使用count参数更稳定
data = api.get_price(code, period='1d', count=10)
```

### 运行效果预览
```
============================================================
第4课：按日期范围获取数据
============================================================
1. 获取最近一周的数据
获取 2024-01-05 到 2024-01-12 的数据
✓ 日期范围数据获取成功
数据条数: 5
日期范围: 2024-01-08 到 2024-01-12
价格统计:
  最高价: 12.78
  最低价: 12.38
  平均价: 12.59

2. 测试不同的日期格式
测试日期格式: 2024-01-09 到 2024-01-12
✓ 格式 2024-01-09 解析成功，获取 4 条数据
测试日期格式: 20240109 到 20240112
✓ 格式 20240109 解析成功，获取 4 条数据
测试日期格式: 2024/01/09 到 2024/01/12
✓ 格式 2024/01/09 解析成功，获取 4 条数据

3. 使用count参数获取最近数据（推荐方式）
✓ count方式数据获取成功
数据条数: 10
最新5条数据:
        time    code   open   high    low  close
2024-01-08  000001.SZ  12.38  12.52  12.35  12.45
2024-01-09  000001.SZ  12.45  12.67  12.38  12.58
2024-01-10  000001.SZ  12.60  12.78  12.52  12.71
2024-01-11  000001.SZ  12.71  12.85  12.65  12.78
2024-01-12  000001.SZ  12.78  12.89  12.72  12.85

按回车键继续下一课...
```

### 关键知识点
- 支持多种日期格式：'YYYY-MM-DD'、'YYYYMMDD'、'YYYY/MM/DD'
- 使用 `count` 参数比日期范围更稳定
- 可以进行简单的价格统计分析

---

## 💰 第5课：获取实时价格

### 学习目标
学习如何获取股票的实时价格信息

### 单只股票实时价格
```python
# 获取平安银行实时价格
current = api.get_current_price('000001.SZ')
if not current.empty:
    print("✓ 实时价格获取成功")
    print(current.to_string())
```

### 多只股票实时价格
```python
# 获取多只股票实时价格
codes = ['000001.SZ', '000002.SZ', '600000.SH', '600036.SH']
current = api.get_current_price(codes)

if not current.empty:
    print("✓ 多股票实时价格获取成功")
    print("实时价格数据:")
    
    # 显示关键字段
    available_columns = ['code', 'price', 'open', 'high', 'low', 'pre_close']
    display_columns = [col for col in available_columns if col in current.columns]
    print(current[display_columns].to_string())
    
    # 计算涨跌幅
    print("\n涨跌幅计算:")
    for _, row in current.iterrows():
        if row['pre_close'] > 0:
            change = row['price'] - row['pre_close']
            change_pct = (change / row['pre_close']) * 100
            print(f"{row['code']}: {change:+.2f} ({change_pct:+.2f}%)")
```

### 运行效果预览
```
============================================================
第5课：获取实时价格
============================================================
1. 获取平安银行实时价格
✓ 实时价格获取成功
    code   price   open   high    low  pre_close
000001.SZ  12.61  12.58  12.65  12.55      12.58

2. 获取多只股票实时价格
✓ 多股票实时价格获取成功
实时价格数据:
    code   price   open   high    low  pre_close
000001.SZ  12.61  12.58  12.65  12.55      12.58
000002.SZ   8.53   8.51   8.58   8.49       8.51
600000.SH  10.41  10.38  10.45  10.35      10.38
600036.SH  35.67  35.45  35.78  35.42      35.45

涨跌幅计算:
000001.SZ: +0.03 (+0.24%)
000002.SZ: +0.02 (+0.23%)
600000.SH: +0.03 (+0.29%)
600036.SH: +0.22 (+0.62%)

按回车键继续下一课...
```

### 关键知识点
- 使用 `api.get_current_price()` 获取实时价格
- 返回包含当前价、开盘价、最高价、最低价、昨收价等信息
- 可以自动计算涨跌幅和涨跌额
- 支持单只和多只股票同时查询

---

## 📋 第6课：获取股票列表

### 学习目标
学习如何获取不同板块的股票列表

### 获取A股列表
```python
# 获取所有A股列表
stock_list = api.get_stock_list('A股')
if stock_list:
    print(f"✓ A股列表获取成功，共 {len(stock_list)} 只股票")
    print("前10只股票:")
    for i, code in enumerate(stock_list[:10]):
        print(f"  {i+1}. {code}")
```

### 获取沪深300列表
```python
# 获取沪深300列表
hs300_list = api.get_stock_list('沪深300')
if hs300_list:
    print(f"✓ 沪深300列表获取成功，共 {len(hs300_list)} 只股票")
    print("前10只股票:")
    for i, code in enumerate(hs300_list[:10]):
        print(f"  {i+1}. {code}")
```

### 运行效果预览
```
============================================================
第6课：获取股票列表
============================================================
1. 获取A股列表
✓ A股列表获取成功，共 4856 只股票
前10只股票:
  1. 000001.SZ
  2. 000002.SZ
  3. 000004.SZ
  4. 000005.SZ
  5. 000006.SZ
  6. 000007.SZ
  7. 000008.SZ
  8. 000009.SZ
  9. 000010.SZ
  10. 000011.SZ

2. 获取沪深300列表
✓ 沪深300列表获取成功，共 300 只股票
前10只股票:
  1. 000001.SZ
  2. 000002.SZ
  3. 000063.SZ
  4. 000069.SZ
  5. 000100.SZ
  6. 000157.SZ
  7. 000166.SZ
  8. 000300.SZ
  9. 000338.SZ
  10. 000425.SZ

按回车键继续下一课...
```

### 关键知识点
- 使用 `api.get_stock_list()` 获取股票列表
- 支持多种板块：'A股'、'沪深300'、'中证500'等
- 返回股票代码列表，可用于批量数据获取

---

## 📆 第7课：获取交易日历

### 学习目标
学习如何获取交易日历信息

### 获取最近交易日
```python
# 获取最近10个交易日
trading_dates = api.get_trading_dates(market='SH', count=10)
if trading_dates:
    print("✓ 交易日获取成功")
    print("最近10个交易日:")
    for i, date in enumerate(trading_dates[-10:]):
        print(f"  {i+1}. {date}")
```

### 获取指定时间段交易日
```python
from datetime import datetime

# 获取本月的交易日
current_date = datetime.now()
start_of_month = current_date.replace(day=1)

start_str = start_of_month.strftime('%Y-%m-%d')
end_str = current_date.strftime('%Y-%m-%d')

trading_dates = api.get_trading_dates(
    market='SH',
    start=start_str,
    end=end_str
)

if trading_dates:
    print(f"✓ 本月交易日获取成功，共 {len(trading_dates)} 天")
    for date in trading_dates:
        print(f"  {date}")
```

### 运行效果预览
```
============================================================
第7课：获取交易日历
============================================================
1. 获取最近10个交易日
✓ 交易日获取成功
最近10个交易日:
  1. 2024-01-02
  2. 2024-01-03
  3. 2024-01-04
  4. 2024-01-05
  5. 2024-01-08
  6. 2024-01-09
  7. 2024-01-10
  8. 2024-01-11
  9. 2024-01-12
  10. 2024-01-15

2. 获取本月的交易日
获取 2024-01-01 到 2024-01-15 的交易日
✓ 本月交易日获取成功，共 11 天
交易日列表:
  2024-01-02
  2024-01-03
  2024-01-04
  2024-01-05
  2024-01-08
  2024-01-09
  2024-01-10
  2024-01-11
  2024-01-12
  2024-01-15
  2024-01-16

3. 获取最近30个交易日（推荐方式）
✓ 最近30个交易日获取成功
最近10个交易日:
  1. 2024-01-02
  2. 2024-01-03
  3. 2024-01-04
  4. 2024-01-05
  5. 2024-01-08
  6. 2024-01-09
  7. 2024-01-10
  8. 2024-01-11
  9. 2024-01-12
  10. 2024-01-15
... 共 30 个交易日

按回车键继续下一课...
```

### 关键知识点
- 使用 `api.get_trading_dates()` 获取交易日历
- 支持按数量获取（count参数）和按日期范围获取
- 可以指定不同市场：'SH'（上海）、'SZ'（深圳）
- 返回的是交易日列表，排除了周末和节假日

---

## 🚀 运行学习实例

### 运行完整课程
```bash
# 进入学习实例目录
cd 学习实例

# 运行基础入门课程（交互模式）
python 01_基础入门.py

# 自动运行所有课程（无需手动确认）
python 01_基础入门.py --auto
```

### 课程运行流程
1. **第1课**：基础设置和初始化
2. **第2课**：获取股票数据
3. **第3课**：获取不同周期的数据
4. **第4课**：按日期范围获取数据
5. **第5课**：获取实时价格
6. **第6课**：获取股票列表
7. **第7课**：获取交易日历

### 交互式学习
- 每完成一课后，按回车键继续下一课
- 可以随时按 Ctrl+C 中断学习
- 支持自动模式和手动模式

### 模拟模式运行
如果QMT客户端未启动，程序会自动切换到模拟模式：
```
⚠️ 数据服务初始化失败，这是正常的
💡 原因：需要启动迅投客户端并登录
🔄 继续使用模拟模式进行学习
```

---

## ❓ 常见问题

### Q1: 数据服务初始化失败？
**A:** 
1. 确保QMT客户端已启动并登录
2. 检查网络连接是否正常
3. 程序会自动切换到模拟模式继续学习

### Q2: 某些数据周期获取失败？
**A:**
1. 避免使用 '15m'、'30m'、'1h' 周期
2. 推荐使用 '1d'、'1m'、'5m' 周期
3. 使用 count 参数比日期范围更稳定

### Q3: 实时价格获取不到？
**A:**
1. 确认股票代码格式正确（如：'000001.SZ'）
2. 检查是否在交易时间内
3. 程序会自动使用模拟数据进行演示

### Q4: 如何查看更多学习实例？
**A:**
学习完基础入门后，可以继续学习：
- `02_交易基础.py` - 学习基础交易功能
- `03_高级交易.py` - 学习高级交易功能
- `04_策略开发.py` - 学习策略开发

### Q5: 程序运行中断怎么办？
**A:**
1. 按 Ctrl+C 可以随时中断学习
2. 重新运行程序即可从头开始
3. 使用 `--auto` 参数可以自动运行所有课程

---

## 🎓 学习总结

通过本教程的7个课程，您已经掌握了：

✅ **基础操作**: EasyXT的初始化和基本使用  
✅ **数据获取**: 历史数据、实时数据、不同周期数据  
✅ **日期处理**: 按日期范围获取数据和交易日历  
✅ **股票列表**: 获取不同板块的股票代码  
✅ **实战技巧**: 数据周期选择和错误处理  

### 下一步学习建议

1. **运行实际代码**: 执行 `学习实例/01_基础入门.py`
2. **深入学习交易**: 学习 `02_交易基础.py`
3. **策略开发**: 学习 `04_策略开发.py`
4. **扩展功能**: 探索其他学习实例

### 学习路径推荐
```
01_基础入门.py     ← 当前教程
    ↓
02_交易基础.py     ← 学习交易功能
    ↓
03_高级交易.py     ← 高级交易技巧
    ↓
04_策略开发.py     ← 策略开发实战
    ↓
其他专题学习...
```

---

## 📚 相关资源

- **学习实例**: `学习实例/01_基础入门.py`
- **EasyXT源码**: `easy_xt/`
- **xtquant文档**: [官方文档](https://dict.thinktrader.net/)
- **其他学习实例**: `学习实例/` 目录下的其他文件

---

**🎯 开始您的EasyXT学习之旅吧！运行 `学习实例/01_基础入门.py` 开始实践。**

---

*本教程仅供学习参考，投资有风险，入市需谨慎！*