{
  "version": "3.0",
  "version_comment": "配置版本号，用于区分不同版本的统一配置",
  "description": "雪球跟单系统统一配置文件 - 已整合所有配置项",
  "description_comment": "配置文件整体说明，便于理解用途",
  "last_updated": "2025-10-02",
  "last_updated_comment": "最后一次更新配置的日期（YYYY-MM-DD）",
  "config_source": "unified_config.json",
  "config_source_comment": "当前配置来源文件名，用于标识配置加载来源",

  "system": {
    "system_comment": "系统级通用设置（配置管理、QMT连接等）",
    "config_manager": {
      "primary_config": "unified_config.json",
      "primary_config_comment": "主配置文件名，优先使用的配置",
      "fallback_configs": [
        "default.json",
        "settings.json",
        "xueqiu_config.json"
      ],
      "fallback_configs_comment": "备用配置文件列表，当主配置缺项时可从这些文件回退读取"
    },
    "qmt": {
      "qmt_comment": "QMT交易端相关设置",
      "session_id": "xueqiu_follow",
      "session_id_comment": "会话ID，用于标识本次运行的交易会话",
      "api_type": "easyxt",
      "api_type_comment": "交易API类型（如 easyxt），需与实际接入的API一致",
      "auto_retry": true,
      "auto_retry_comment": "发生连接或请求失败时是否自动重试",
      "retry_delay": 5,
      "retry_delay_comment": "自动重试的间隔秒数",
      "max_retries": 3,
      "max_retries_comment": "最大自动重试次数"
    }
  },

  "settings": {
    "settings_comment": "运行时的通用设置（账户、风控、监控、日志、交易参数等）",
    "follow_mode": {
      "follow_mode_comment": "跟单模式选择",
      "mode": "smart_follow",
      "mode_comment": "跟单模式：smart_follow(智能跟投模式) - 基于持仓差异计算，避免重复下单；simple_follow(跟投模式) - 模仿雪球跟单系统3.0，可能重复下单",
      "available_modes": ["smart_follow", "simple_follow"],
      "available_modes_comment": "可用的跟单模式列表：smart_follow(智能跟投模式)，simple_follow(跟投模式)",
      "default_mode": "smart_follow",
      "default_mode_comment": "默认跟单模式：智能跟投模式",
      "display_names": {
        "smart_follow": "智能跟投模式",
        "simple_follow": "跟投模式"
      },
      "display_names_comment": "跟单模式的中文显示名称"
    },
    "account": {
      "account_comment": "交易账户配置",
      "qmt_path": "D:\\\\国金QMT交易端模拟\\\\userdata_mini",
      "qmt_path_comment": "QMT交易端的安装/数据路径（用于连接本地交易端）",
      "account_id": "39020958",
      "account_id_comment": "交易账户ID（模拟或实盘账户）",
      "password": "",
      "password_comment": "账户密码（如无需则留空，注意安全）",
      "auto_detect_qmt": true,
      "auto_detect_qmt_comment": "是否自动检测QMT路径与状态"
    },
    "risk": {
      "risk_comment": "风控相关参数设置",
      "max_position_ratio": 0.1,
      "max_position_ratio_comment": "单票最大持仓比例（相对于总资产）",
      "stop_loss_ratio": 0.05,
      "stop_loss_ratio_comment": "单票止损比例（亏损达到比例触发止损）",
      "max_total_exposure": 0.8,
      "max_total_exposure_comment": "整体最大敞口比例（总仓位上限）",
      "blacklist": [
        "ST*",
        "*ST"
      ],
      "blacklist_comment": "黑名单规则（支持通配符），匹配到的标的不参与交易",
      "emergency_stop": false,
      "emergency_stop_comment": "紧急止停开关（触发后暂停所有交易）"
    },
    "monitoring": {
      "monitoring_comment": "运行监控与健康检查参数",
      "check_interval": 30,
      "check_interval_comment": "监控检查的时间间隔（秒）",
      "retry_times": 3,
      "retry_times_comment": "监控失败时的重试次数",
      "timeout": 10,
      "timeout_comment": "监控与请求的超时时间（秒）",
      "max_delay": 3,
      "max_delay_comment": "允许的最大延迟（秒），用于行情等超时判断",
      "health_check_interval": 300,
      "health_check_interval_comment": "健康检查周期（秒），用于系统自检"
    },
    "logging": {
      "logging_comment": "日志记录设置",
      "level": "INFO",
      "level_comment": "日志级别（DEBUG/INFO/WARN/ERROR）",
      "file": "logs/xueqiu_follow.log",
      "file_comment": "日志文件路径",
      "max_size": "10MB",
      "max_size_comment": "单个日志文件的最大大小（达到后滚动）",
      "backup_count": 5,
      "backup_count_comment": "日志文件最大备份数量",
      "enable_console": true,
      "enable_console_comment": "是否在控制台输出日志"
    },
    "trading": {
      "trading_comment": "交易参数设置",
      "trade_mode": "paper_trading",
      "trade_mode_comment": "交易模式（paper_trading为仿真；real为实盘）",
      "auto_confirm": true,
      "auto_confirm_comment": "自动确认下单与执行（谨慎开启）",
      "price_tolerance": 0.02,
      "price_tolerance_comment": "价格容忍度（用于偏差判断）",
      "min_trade_amount": 100,
      "min_trade_amount_comment": "最小交易数量（手/股）"
    },

    "order": {
      "order_comment": "再平衡与下单防抖设置",
      "min_diff_ratio_shares": 0.003,
      "min_diff_ratio_shares_comment": "最小股数差异比例阈值（相对目标股数），默认0.3%",
      "min_diff_abs_shares": 500,
      "min_diff_abs_shares_comment": "最小绝对股数阈值（手数取整后），默认500股；与价值带宽需同时满足才触发再平衡",
      "value_band_trigger_ratio": 0.005,
      "value_band_trigger_ratio_comment": "价值带宽触发阈值（目标价值偏差比例），默认0.5%",
      "cooldown_seconds": 300,
      "cooldown_seconds_comment": "每标的冷却时间（秒），默认5分钟",
      "daily_max_rebalances_per_symbol": 1,
      "daily_max_rebalances_per_symbol_comment": "每个标的每天最多允许触发的再平衡次数，默认1次"
    },
    "export_holdings": true,
    "export_holdings_comment": "是否导出持仓（true开启导出，false不导出）。导出文件位于 export_dir 指定目录，文件名为 {组合代码}_持仓数据.xlsx",
    "export_dir": "reports",
    "export_dir_comment": "持仓导出目录（默认 reports）。建议保持默认，避免在 strategies 目录下生成大量文件"
  },

  "portfolios": {
    "portfolios_comment": "组合跟单相关设置",
    "portfolios": [
      {
        "name": "雪球组合ZH3331011",
        "name_comment": "组合的显示名称",
        "code": "ZH3331011",
        "code_comment": "雪球组合代码（用于抓取与跟单）",
        "follow_ratio": 0.02,
        "follow_ratio_comment": "跟随比例（例如0.02表示2%跟随）",
        "enabled": true,
        "enabled_comment": "是否启用该组合的跟单",
        "url": "https://xueqiu.com/P/ZH3331011",
        "url_comment": "组合页面URL（用于数据抓取）",
        "description": "雪球跟单组合，2%跟随比例",
        "description_comment": "该组合的备注说明"
      },
      {
        "name": "雪球组合ZH3526879",
        "name_comment": "组合的显示名称",
        "code": "ZH3526879",
        "code_comment": "雪球组合代码（用于抓取与跟单）",
        "follow_ratio": 0.02,
        "follow_ratio_comment": "跟随比例（例如0.02表示2%跟随）",
        "enabled": true,
        "enabled_comment": "是否启用该组合的跟单true/false",
        "url": "https://xueqiu.com/P/ZH3526879",
        "url_comment": "组合页面URL（用于数据抓取）",
        "description": "雪球跟单组合，2%跟随比例（暂不启用）",
        "description_comment": "该组合的备注说明"
      }
    ],
    "global_settings": {
      "global_settings_comment": "组合跟单的全局设置",
      "total_follow_ratio": 0.02,
      "total_follow_ratio_comment": "整体跟随比例上限（控制全局风险敞口）",
      "auto_start": true,
      "auto_start_comment": "系统启动后自动开始跟单流程",
      "emergency_stop": false,
      "emergency_stop_comment": "紧急止停（对所有组合生效）"
    }
  },

  "xueqiu": {
    "xueqiu_comment": "雪球数据访问设置",
    "cookie": "smidV2=20240828220851fc36d458234e5b3849e5f8c0d2e39453007c9161b8c22d8c0; cookiesu=371759151586657; device_id=de4db0497aca1d863988e7fdc89a1124; s=ar15r8rtll; remember=1; xq_a_token=2a2d972804f71839c4f65b68e43238be64087fd8; xqat=2a2d972804f71839c4f65b68e43238be64087fd8; xq_id_token=eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJ1aWQiOjg3NzMyNTgxNzYsImlzcyI6InVjIiwiZXhwIjoxNzYxNzQzNjk2LCJjdG0iOjE3NTkxNTE2OTY0NTksImNpZCI6ImQ5ZDBuNEFadXAifQ.hNQveLM9Z1RtAPrEy8rgz6zEPv_sP5iB1mkjldhNaYJj4pCNv0qRne-ul3K-ptGNRdkOlfuovwykfZ6O3rhGR9aXfvM-nJ7PFAOEBHddqc7BwlibA8VVqyQ7iAkoLqVHNocuexoq3c47kpDKuNE0WiIIXuNfYMFBLCMKm7vVXJfRDIg1Uj2XIzZbFDuRHyRHDfAoFEvItj7md4vzKP1dw7b0GyfkffOVKRx5bcCsNSj3WcPxSqVhInP6i1czNRjg0hRIRxXFBCtlsp6wtwo7TYNGyvQU7T3xWngVwBo_AQoHUJs5PUHtiBB2q1LR_08PGBwtQXlR5w2i6lBDzDKkgw; xq_r_token=40889d37108cb4a212b89182a6ffead4252f01dc; xq_is_login=1; u=8773258176; bid=4fce4b73b1efef52004b4a8aa7ef145f_mg55inqz; __utmz=1.1759151715.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); aliyungf_tc=a9dabc83c2557f052fd647ade2766a9bdfb6d2be31e8a06ce8d707caa92f054c; Hm_lvt_1db88642e346389874251b5a1eded6e3=1759151577,1759193191,1759240487,1759325515; HMACCOUNT=82B375A20D7CCB08; __utma=1.1471451696.1759151715.1759240510.1759327050.4; __utmc=1; is_overseas=0; Hm_lpvt_1db88642e346389874251b5a1eded6e3=1759331545; .thumbcache_f24b8bbe5a5934237bbc0eda20c1b6e7=ag87igTQ6cnOargR7oviHWmziLMr3/PfQYtDxzWeGIoS1qnTP0xCf1nO0kLlP3mTWjUcEuOBEXWHuSIeWTw9sg%3D%3D",
    "cookie_comment": "用于访问雪球的cookie（留空表示未设置，注意安全性）",
    "update_time": "2025-10-16T12:00:00",
    "update_time_comment": "cookie或登录信息的更新时间",
    "auto_refresh": true,
    "auto_refresh_comment": "是否自动刷新雪球数据（如持仓、净值等）",
    "refresh_interval": 3600,
    "refresh_interval_comment": "自动刷新间隔（秒）"
  },

  "safety": {
    "safety_comment": "安全相关设置（下单限制、黑名单等）",
    "auto_confirm": true,
    "auto_confirm_comment": "下单自动确认（谨慎开启）",
    "max_order_value": 100000,
    "max_order_value_comment": "单笔订单最大金额限制",
    "daily_limit": 500000,
    "daily_limit_comment": "每日交易金额上限",
    "enable_blacklist": true,
    "enable_blacklist_comment": "是否启用黑名单规则"
  },

  "xueqiu_settings": {
    "xueqiu_settings_comment": "雪球登录与用户信息（敏感字段谨慎使用）",
    "cookie": "cookiesu=371759151586657; device_id=de4db0497aca1d863988e7fdc89a1124; s=ar15r8rtll; bid=4fce4b73b1efef52004b4a8aa7ef145f_mg55inqz; Hm_lvt_1db88642e346389874251b5a1eded6e3=1760277557,1760316202,1760404483,1760589260; HMACCOUNT=82B375A20D7CCB08; xq_a_token=20f28801f749d6862a851225d7e96deb35d74541; xqat=20f28801f749d6862a851225d7e96deb35d74541; xq_r_token=d58ad70ed1a03015c7ccc9f08f26ac1a2bab345d; xq_id_token=eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJ1aWQiOjgzNTYzNjQxODAsImlzcyI6InVjIiwiZXhwIjoxNzYzMTg5MjkzLCJjdG0iOjE3NjA1OTcyOTM1NzUsImNpZCI6ImQ5ZDBuNEFadXAifQ.b4DMsVqdPio8L74KHhxc3ik4z85sxGpyOQkqXOwxFluUT-q-36RNhxHP5a_j3y62BZo4Xw2IJvEjItcTtKD5FQJhXkiM7gub4YGp-2mFfXURBriFBTVl4pyOBhThBXRWwbGAnygv7n6xXSec2VccHlGoX-ZJZ_5gEknGkv6nC3udeLRjbhEJUVfFLcZYmGE6S2UC_UtGWACZWJrUMu7bQIwBnkgcw7xN231lfIybe58-dckRfEd5TT1YbJRRamw4dMT98LwofTPcMb5JeRU9E48ePZqr3c5Bfel_02hfhiW2tU8I6QNrmLcxsCR4vNJaRbVpjvsfSYRMAJG1Cuc-jg; xq_is_login=1; u=8356364180; is_overseas=0; Hm_lpvt_1db88642e346389874251b5a1eded6e3=1760597334; ssxmod_itna=1-eq0xcDyD0AD=0Qqi7qitaDOeG7YiOaq7DzxCvyK0C7DLxn4GQDUlYNlitGD7w_rP_5NGgw0Y7MK=DDsqQQ4GzDiuPGhDBnYH=YAigUPKCRCDQehWFh7TP1k/75u3qHfAzTc95nFsz9=jdipKxGLDY=DCkAr87eD4S3Dt4DIDAYDDxDWU4DLDYoDYRT5xGpdMQnrXQbND0YDzqDgD7QNUeDEDG3D0SR5WA5=aDDl7Gx7Q0xDbgbi=QFNIPDSzDnxKBbDjdPD/RDUaBbDGLMXa0WiL/8pH3RHsPGuDG=kZe2OprTWPcrpNfhpDwKgP77eqlI4WxDxvKZDDhD4iG3ADG0Y77xBCrcQYXQGrBPDnn55oQ7nDb_M_5ZUmZ0yYQ4QziDv7TF44G2bz_7W04Bgzt_bBhND_i4h452Nf0t80==iorFbGrPeD; ssxmod_itna2=1-eq0xcDyD0AD=0Qqi7qitaDOeG7YiOaq7DzxCvyK0C7DLxn4GQDUlYNlitGD7w_rP_5NGgw0Y7MKxAEr3KclE_5=KDqDsqKn0oQAC5ELyXGN4aEhyn3eD",
    "cookie_comment": "雪球登录cookie（敏感信息，不建议公开传播）",
    "update_time": "2025-10-16T12:00:00",
    "update_time_comment": "上述cookie更新时间（ISO格式）",
    "user_id": "8773258176",
    "user_id_comment": "雪球用户ID",
    "login_status": true,
    "login_status_comment": "是否处于登录状态（用于判断cookie有效性）"
  },

  "trading_settings": {
    "trading_settings_comment": "兼容旧版字段的映射，用于适配历史代码逻辑",
    "settings": {
      "settings_comment": "旧版 settings 节点映射（建议逐步合并到新的 settings）",
      "account": {
        "account_comment": "旧版账户字段映射",
        "account_id": "39020958",
        "account_id_comment": "交易账户ID（旧版映射）",
        "qmt_path": "D:\\\\国金QMT交易端模拟\\\\userdata_mini",
        "qmt_path_comment": "QMT路径（旧版映射）"
      }
    }
  }
}