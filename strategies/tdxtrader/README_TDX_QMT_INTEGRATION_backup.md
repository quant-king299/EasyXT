# é€šè¾¾ä¿¡é¢„è­¦ä¿¡å·å¯¹æ¥QMTå®ç›˜äº¤æ˜“æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç»å¦‚ä½•å°†é€šè¾¾ä¿¡é¢„è­¦ä¿¡å·ä¸QMTå®ç›˜äº¤æ˜“ç³»ç»Ÿå¯¹æ¥ï¼Œå®ç°è‡ªåŠ¨åŒ–äº¤æ˜“ã€‚é€šè¿‡æœ¬æ–¹æ¡ˆï¼Œæ‚¨å¯ä»¥å°†é€šè¾¾ä¿¡çš„æŠ€æœ¯æŒ‡æ ‡é¢„è­¦ä¿¡å·è‡ªåŠ¨è½¬æ¢ä¸ºQMTçš„å®ç›˜äº¤æ˜“æŒ‡ä»¤ã€‚

## ğŸ§  å·¥ä½œåŸç†

### ç³»ç»Ÿæ¶æ„

```
é€šè¾¾ä¿¡é¢„è­¦æ–‡ä»¶ â†’ tdxtraderç›‘å¬ â†’ EasyXT API â†’ QMTäº¤æ˜“ç»ˆç«¯
```

### æ ¸å¿ƒç»„ä»¶

1. **é€šè¾¾ä¿¡é¢„è­¦æ–‡ä»¶**ï¼šé€šè¾¾ä¿¡è½¯ä»¶ç”Ÿæˆçš„é¢„è­¦ä¿¡å·æ–‡ä»¶ï¼ˆsign.txtï¼‰
2. **tdxtraderæ¨¡å—**ï¼šç›‘å¬é¢„è­¦æ–‡ä»¶å˜åŒ–å¹¶è§£æä¿¡å·
3. **EasyXT API**ï¼šå°è£…QMTäº¤æ˜“æ¥å£ï¼Œæä¾›ç®€åŒ–çš„äº¤æ˜“API
4. **QMTäº¤æ˜“ç»ˆç«¯**ï¼šè¿…æŠ•QMTå®ç›˜äº¤æ˜“ç³»ç»Ÿ

## ğŸ› ï¸ å®ç°æ–¹æ³•

### 1. ç¯å¢ƒå‡†å¤‡

#### ç³»ç»Ÿè¦æ±‚
- Windowsæ“ä½œç³»ç»Ÿï¼ˆQMTé™åˆ¶ï¼‰
- Python 3.8+
- QMTäº¤æ˜“ç»ˆç«¯ï¼ˆæ ‡å‡†ç‰ˆæˆ–è¿·ä½ ç‰ˆï¼‰
- é€šè¾¾ä¿¡é‡‘èç»ˆç«¯

#### å®‰è£…ä¾èµ–

```bash
# å®‰è£…é¡¹ç›®ä¾èµ–
pip install -r requirements.txt

# ç¡®ä¿xtquantåº“å·²æ­£ç¡®éƒ¨ç½²
# ä»é¡¹ç›®Releaseä¸­ä¸‹è½½xtquant.rarå¹¶è§£å‹åˆ°é¡¹ç›®æ ¹ç›®å½•
```

### 2. é…ç½®é€šè¾¾ä¿¡é¢„è­¦

#### è®¾ç½®é¢„è­¦æŒ‡æ ‡
1. åœ¨é€šè¾¾ä¿¡ä¸­åˆ›å»ºæŠ€æœ¯æŒ‡æ ‡å…¬å¼
2. è®¾ç½®é¢„è­¦æ¡ä»¶ï¼ˆå¦‚KDJé‡‘å‰ã€MACDæ­»å‰ç­‰ï¼‰
3. é…ç½®é¢„è­¦è¾“å‡ºæ ¼å¼

#### é¢„è­¦æ–‡ä»¶è·¯å¾„
é»˜è®¤é¢„è­¦æ–‡ä»¶è·¯å¾„ä¸ºï¼š`D:/new_tdx/sign.txt`
å¯æ ¹æ®éœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹ã€‚

### 3. é…ç½®äº¤æ˜“å‚æ•°

#### é…ç½®æ–‡ä»¶è¯´æ˜
é…ç½®æ–‡ä»¶ä½äºï¼š`strategies/tdxtrader/config/tdx_easyxt_config.json`

```json
{
    "tdx_file_path": "D:/new_tdx/sign.txt",     // é€šè¾¾ä¿¡é¢„è­¦æ–‡ä»¶è·¯å¾„
    "interval": 1,                              // è½®è¯¢é—´éš”ï¼ˆç§’ï¼‰
    "buy_signals": [                           // ä¹°å…¥ä¿¡å·åç§°åˆ—è¡¨
        "KDJä¹°å…¥æ¡ä»¶é€‰è‚¡",
        "MACDä¹°å…¥æ¡ä»¶é€‰è‚¡"
    ],
    "sell_signals": [                          // å–å‡ºä¿¡å·åç§°åˆ—è¡¨
        "KDJå–å‡ºæ¡ä»¶é€‰è‚¡",
        "MACDå–å‡ºæ¡ä»¶é€‰è‚¡"
    ],
    "cancel_after": 10,                        // æœªæˆäº¤æ’¤å•æ—¶é—´ï¼ˆç§’ï¼‰
    "wechat_webhook_url": null,                // ä¼ä¸šå¾®ä¿¡æœºå™¨äººURLï¼ˆå¯é€‰ï¼‰
    "default_volume": 100,                     // é»˜è®¤äº¤æ˜“æ•°é‡
    "price_type": "å¸‚ä»·"                       // ä»·æ ¼ç±»å‹ï¼ˆå¸‚ä»·/é™ä»·ï¼‰
}
```

#### ç»Ÿä¸€é…ç½®æ–‡ä»¶
è´¦æˆ·ä¿¡æ¯å’ŒQMTè·¯å¾„é…ç½®åœ¨é¡¹ç›®æ ¹ç›®å½•çš„ç»Ÿä¸€é…ç½®æ–‡ä»¶ä¸­ï¼š
`config/unified_config.json`

```json
{
  "settings": {
    "account": {
      "qmt_path": "D:\\å›½é‡‘QMTäº¤æ˜“ç«¯æ¨¡æ‹Ÿ\\userdata_mini",  // QMTè·¯å¾„
      "account_id": "39020958"                             // è´¦æˆ·ID
    }
  }
}
```

### 4. å®ç°äº¤æ˜“é€»è¾‘

#### ä¹°å…¥äº‹ä»¶å¤„ç†
```python
def buy_event(params):
    """
    ä¹°å…¥äº‹ä»¶å¤„ç†å‡½æ•°
    
    Args:
        params: åŒ…å«äº¤æ˜“ç›¸å…³ä¿¡æ¯çš„å­—å…¸
            - stock: è‚¡ç¥¨ä¿¡æ¯
            - position: æŒä»“ä¿¡æ¯
            - xt_trader: äº¤æ˜“å¯¹è±¡
            - account: è´¦æˆ·å¯¹è±¡
    """
    stock = params.get('stock')
    position = params.get('position')
    
    print(f"ğŸ“ˆ ä¹°å…¥ä¿¡å·è§¦å‘: {stock.get('name')} ({stock.get('code')})")
    
    # è¿”å›äº¤æ˜“å‚æ•°
    return {
        'size': 100,           # äº¤æ˜“æ•°é‡
        'price': -1,           // å¸‚ä»·å•ä½¿ç”¨-1
        'type': 'å¸‚ä»·'         // ä»·æ ¼ç±»å‹
    }
```

#### å–å‡ºäº‹ä»¶å¤„ç†
```python
def sell_event(params):
    """
    å–å‡ºäº‹ä»¶å¤„ç†å‡½æ•°
    
    Args:
        params: åŒ…å«äº¤æ˜“ç›¸å…³ä¿¡æ¯çš„å­—å…¸
    """
    stock = params.get('stock')
    position = params.get('position')
    
    print(f"ğŸ“‰ å–å‡ºä¿¡å·è§¦å‘: {stock.get('name')} ({stock.get('code')})")
    
    # æ£€æŸ¥æŒä»“
    if position is None:
        print("âš ï¸  æ— æŒä»“ï¼Œä¸æ‰§è¡Œå–å‡ºæ“ä½œ")
        return None
    
    # è¿”å›äº¤æ˜“å‚æ•°
    return {
        'size': position.can_use_volume,  // å–å‡ºå¯ç”¨æŒä»“
        'price': -1,                      // å¸‚ä»·å•ä½¿ç”¨-1
        'type': 'å¸‚ä»·'                    // ä»·æ ¼ç±»å‹
    }
```

### 5. å¯åŠ¨äº¤æ˜“ç³»ç»Ÿ

#### ä½¿ç”¨ç¤ºä¾‹
```python
from strategies.tdxtrader.tdxtrader_integration_example import start_tdx_trading_with_easyxt

# å¯åŠ¨äº¤æ˜“ç³»ç»Ÿ
start_tdx_trading_with_easyxt()
```

#### å‘½ä»¤è¡Œå¯åŠ¨
```bash
cd c:\Users\Administrator\Desktop\miniqmtæ‰©å±•
python strategies/tdxtrader/tdxtrader_integration_example.py
```

## ğŸ”§ é«˜çº§é…ç½®

### 1. å¤šä¿¡å·å¤„ç†
æ”¯æŒåŒæ—¶ç›‘å¬å¤šä¸ªä¹°å…¥/å–å‡ºä¿¡å·ï¼š
```json
{
    "buy_signals": [
        "KDJä¹°å…¥æ¡ä»¶é€‰è‚¡",
        "MACDä¹°å…¥æ¡ä»¶é€‰è‚¡",
        "RSIè¶…å–ä¹°å…¥"
    ],
    "sell_signals": [
        "KDJå–å‡ºæ¡ä»¶é€‰è‚¡",
        "MACDå–å‡ºæ¡ä»¶é€‰è‚¡",
        "RSIè¶…ä¹°å–å‡º"
    ]
}
```

### 2. ä¼ä¸šå¾®ä¿¡é€šçŸ¥
é…ç½®ä¼ä¸šå¾®ä¿¡æœºå™¨äººURLï¼Œå®æ—¶æ¥æ”¶äº¤æ˜“é€šçŸ¥ï¼š
```json
{
    "wechat_webhook_url": "https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=your_key"
}
```

### 3. æ¡ä»¶åŒ–äº¤æ˜“
æ ¹æ®æŒä»“ã€èµ„äº§ç­‰æ¡ä»¶å†³å®šæ˜¯å¦äº¤æ˜“ï¼š
```python
def buy_event(params):
    stock = params.get('stock')
    position = params.get('position')
    xt_trader = params.get('xt_trader')
    account = params.get('account')
    
    # è·å–è´¦æˆ·èµ„äº§
    asset = xt_trader.query_stock_asset(account)
    
    # åªåœ¨æ€»èµ„äº§å°äº100ä¸‡æ—¶ä¹°å…¥
    if asset.total_asset < 1000000:
        return {
            'size': 100,
            'price': -1,
            'type': 'å¸‚ä»·'
        }
    else:
        return None  # ä¸æ‰§è¡Œäº¤æ˜“
```

## ğŸ“Š ç›‘æ§ä¸æ—¥å¿—

### æ—¥å¿—çº§åˆ«
- **INFO**: å…³é”®æ“ä½œä¿¡æ¯ï¼ˆå¦‚è¯»å–ä¿¡å·ã€ä¸‹å•æˆåŠŸç­‰ï¼‰
- **ERROR**: é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚ä¸‹å•å¤±è´¥ã€è¿æ¥å¼‚å¸¸ç­‰ï¼‰
- **DEBUG**: è¯¦ç»†è°ƒè¯•ä¿¡æ¯ï¼ˆå¼€å‘æ—¶ä½¿ç”¨ï¼‰

### æ—¥å¿—æ–‡ä»¶
æ—¥å¿—æ–‡ä»¶ä¿å­˜åœ¨ï¼š`strategies/tdxtrader/logs/`

## ğŸ†˜ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æ— æ³•è¿æ¥QMT**
   - æ£€æŸ¥QMTæ˜¯å¦å·²å¯åŠ¨å¹¶ç™»å½•
   - ç¡®è®¤è´¦æˆ·IDå’ŒQMTè·¯å¾„é…ç½®æ­£ç¡®
   - æ£€æŸ¥QMTç‰ˆæœ¬æ˜¯å¦å…¼å®¹

2. **æ— æ³•è¯»å–é¢„è­¦æ–‡ä»¶**
   - ç¡®è®¤é€šè¾¾ä¿¡é¢„è­¦å·²æ­£ç¡®è®¾ç½®
   - æ£€æŸ¥é¢„è­¦æ–‡ä»¶è·¯å¾„é…ç½®
   - ç¡®ä¿æ–‡ä»¶æƒé™æ­£ç¡®

3. **ä¸‹å•å¤±è´¥**
   - æ£€æŸ¥äº¤æ˜“æ—¶é—´ï¼ˆå·¥ä½œæ—¥9:30-15:00ï¼‰
   - ç¡®è®¤è´¦æˆ·èµ„é‡‘å……è¶³
   - æ£€æŸ¥è‚¡ç¥¨æ˜¯å¦åœç‰Œ

### è°ƒè¯•æ–¹æ³•

1. **å¯ç”¨è¯¦ç»†æ—¥å¿—**
   ```python
   # åœ¨tdxtrader/logger.pyä¸­è°ƒæ•´æ—¥å¿—çº§åˆ«
   logger.setLevel(logging.DEBUG)
   ```

2. **æ‰‹åŠ¨æµ‹è¯•äº¤æ˜“**
   ```python
   from easy_xt import get_api
   
   easy_xt = get_api()
   # æµ‹è¯•è¿æ¥
   if easy_xt.init_trade("D:\\å›½é‡‘QMTäº¤æ˜“ç«¯æ¨¡æ‹Ÿ\\userdata_mini"):
       # æµ‹è¯•ä¸‹å•
       order_id = easy_xt.buy("39020958", "600000.SH", 100, 0, "å¸‚ä»·")
       print(f"è®¢å•å·: {order_id}")
   ```

## ğŸ“ˆ æœ€ä½³å®è·µ

### 1. é£é™©æ§åˆ¶
- è®¾ç½®å•ç¥¨æœ€å¤§æŒä»“æ¯”ä¾‹
- æ§åˆ¶æ¯æ—¥äº¤æ˜“æ¬¡æ•°
- å®æ–½æ­¢æŸæ­¢ç›ˆç­–ç•¥

### 2. æ€§èƒ½ä¼˜åŒ–
- åˆç†è®¾ç½®è½®è¯¢é—´éš”
- é¿å…é¢‘ç¹æŸ¥è¯¢è´¦æˆ·ä¿¡æ¯
- ä½¿ç”¨å¼‚æ­¥å¤„ç†æé«˜å“åº”é€Ÿåº¦

### 3. ç›‘æ§å‘Šè­¦
- å®šæœŸæ£€æŸ¥æ—¥å¿—æ–‡ä»¶
- è®¾ç½®å¼‚å¸¸äº¤æ˜“å‘Šè­¦
- ç›‘æ§è´¦æˆ·èµ„é‡‘å˜åŒ–

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [EasyXTä½¿ç”¨æŒ‡å—](strategies/jq2qmt/qka/ä½¿ç”¨æŒ‡å—.md)
- [QMTäº¤æ˜“æ¥å£æ–‡æ¡£](xtquant/doc/xttrader.md)
- [ç»Ÿä¸€é…ç½®æ–‡ä»¶è¯´æ˜](config/unified_config.json)

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·è”ç³»é¡¹ç›®ç»´æŠ¤è€…æˆ–åœ¨GitHubæäº¤Issueã€‚